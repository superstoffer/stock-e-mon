!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-array")):"function"==typeof define&&define.amd?define("d3-hexbin",["exports","d3-array"],r):r(n.d3_hexbin={},n.d3_array)}(this,function(n,r){"use strict";function t(){function n(t){var e={};return t.forEach(function(r,t){var u=d.call(n,r,t)/f,a=Math.round(u),i=h.call(n,r,t)/o-(1&a?.5:0),c=Math.round(i),s=u-a;if(3*Math.abs(s)>1){var l=i-c,v=c+(c>i?-1:1)/2,g=a+(a>u?-1:1),m=i-v,p=u-g;l*l+s*s>m*m+p*p&&(c=v+(1&a?1:-1)/2,a=g)}var M=c+"-"+a,x=e[M];x?x.push(r):(x=e[M]=[r],x.i=c,x.j=a,x.x=(c+(1&a?.5:0))*o,x.y=a*f)}),r.values(e)}function t(n){var r=0,t=0;return e.map(function(e){var u=Math.sin(e)*n,a=-Math.cos(e)*n,i=u-r,o=a-t;return r=u,t=a,[i,o]})}var i,o,f,c=1,s=1,h=u,d=a;return n.x=function(r){return arguments.length?(h=r,n):h},n.y=function(r){return arguments.length?(d=r,n):d},n.hexagon=function(n){return arguments.length<1&&(n=i),"m"+t(n).join("l")+"z"},n.centers=function(){for(var n=[],r=0,t=!1,e=0;s+i>r;r+=f,t=!t,++e)for(var u=t?o/2:0,a=0;c+o/2>u;u+=o,++a){var h=[u,r];h.i=a,h.j=e,n.push(h)}return n},n.mesh=function(){var r=t(i).slice(0,4).join("l");return n.centers().map(function(n){return"M"+n+"m"+r}).join("")},n.size=function(r){return arguments.length?(c=+r[0],s=+r[1],n):[c,s]},n.radius=function(r){return arguments.length?(i=+r,o=2*i*Math.sin(Math.PI/3),f=1.5*i,n):i},n.radius(1)}var e=r.range(0,2*Math.PI,Math.PI/3),u=function(n){return n[0]},a=function(n){return n[1]},i="0.1.0";n.version=i,n.hexbin=t});